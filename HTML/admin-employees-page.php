<?php
require_once 'init.php';
?>

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="stylesheet" href="./global.css" />
    <link rel="stylesheet" href="./admin-employees-page.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lexend Deca:wght@400;500;600;700;800;900&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;600;700&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" />
</head>
<body>


    <div class="admin-employees-page">
      <div class="admin-employees-page-child"></div>
      <div class="minibackground19">
        <img class="image-1-icon19" alt="" src="./public/image-12@2x.png" />
      </div>
      <div class="navigation-bar-light19">
        <div class="navigation-bar19"></div>
        <div class="navigation-bar-light-inner18">
          <div class="rectangle-parent102">
            <div class="group-child62"></div>
            <b class="login20">Login</b>
          </div>
        </div>
        <div class="cougarcourier1-4-parent16" id="frameContainer1">
          <img
            class="cougarcourier1-4-icon19"
            alt=""
            src="./public/cougarcourier1-4@2x.png"
          />

          <b class="cougar-courier19">Cougar Courier</b>
        </div>
      </div>
      <div class="admin-portal-outline4">
        <div class="frame-parent36">
          <div class="rectangle-parent103">
            <div class="frame-child55"></div>
            <div class="welcome-to-your-portal-page-wrapper14">
              <b class="welcome-to-your16">Employee Details</b>
            </div>
          </div>
          <div class="frame-parent37">
            <div class="frame-wrapper17">
              <div class="button2-parent14">
                <div class="button228" id="button2Container">
                  <div class="button2-child26"></div>
                  <b class="button-228">PO Locations</b>
                </div>
                <div class="button316" id="button3Container">
                  <div class="button3-child14"></div>
                  <b class="button-228">Products</b>
                </div>
                <div class="button428" id="button4Container">
                  <div class="button2-child26"></div>
                  <b class="button-228">Departments</b>
                </div>
                <div class="button54">
                  <div class="button2-child26"></div>
                  <b class="button-228">Employees</b>
                </div>
                <div class="button716" id="button7Container">
                  <div class="button2-child26"></div>
                  <b class="button-228">Account</b>
                </div>
              </div>
            </div>
            <div class="portal-page16"></div>
          </div>
        </div>
      </div>
      <div class="frame12">
        <div class="frame13">
          <div class="rectangle"></div>
          <b class="employee-id">First Name</b>
        </div>
        <div class="frame14">
          <div class="rectangle1"></div>
          <b class="employee-id">Last Name</b>
        </div>
        <div class="frame15">
          <div class="rectangle1"></div>
          <b class="employee-id">Employee ID</b>
        </div>
        <div class="frame16">
          <div class="rectangle3"></div>
          <b class="employee-id">Department ID</b>
        </div>
        <div class="frame17">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame18">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame19">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame20">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame21">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame22">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame23">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame24">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame25">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame26">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame27">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame28">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame29">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame30">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame31">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame32">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame33">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame34">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame35">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame36">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame37">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame38">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame39">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame40">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame41">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame42">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame43">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame44">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame45">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame46">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame47">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame48">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame49">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame50">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame51">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame52">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame53">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame54">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame55">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame56">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame57">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame58">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame59">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame60">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame61">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame62">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame63">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame64">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame65">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame66">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame67">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame68">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame69">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame70">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame71">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame72">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame73">
          <div class="rectangle60"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame74">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame75">
          <div class="rectangle4"></div>
          <div class="employee-id">-</div>
        </div>
        <div class="frame76">
          <div class="rectangle63"></div>
          <div class="employee-id">-</div>
        </div>
      </div>
      <b class="current-employee-list">Current Employee List</b>
      <img
        class="vector-icon42"
        alt=""
        src="./public/portal-home-button.svg"
        id="vector"
      />


        
<div class = "frame12">
<table class="employees-table">
    <thead>
        <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Employee ID</th>
            <th>Department</th>
            <th>Location</th>
        </tr>
    </thead>
    
 <tbody>
<?php
$query = "SELECT first_name, last_name, idnum, dept, branch_id FROM EMPLOYEE E JOIN DEPARTMENT D ON E.dept = D.dept_id JOIN POST_OFFICE P ON D.works_at = P.branch_id ORDER BY idnum ASC";

$result = $conn->query($query);

if (!$result) 
{
    die("Error retrieving employee information: " . $conn->error);
}

while ($row = $result->fetch_assoc()) 
{
    echo "<tr>";
    echo "<td>{$row['first_name']}</td>";
    echo "<td>{$row['last_name']}</td>";
    echo "<td>{$row['idnum']}</td>";
    echo "<td>{$row['dept']}</td>";
    echo "<td>{$row['branch_id']}</td>";
    echo "</tr>";
}
?> </tbody></table>


<form id="addEmployeeForm">
    <label for="firstName">First Name:</label>
    <input type="text" id="firstName" name="firstName" required>

    <label for="middleInitial">Middle Initial:</label>
    <input type="text" id="middleInitial" name="middleInitial">

    <label for="lastName">Last Name:</label>
    <input type="text" id="lastName" name="lastName" required>

    <label for="employeeID">Employee ID:</label>
    <input type="number" id="employeeID" name="employeeID" required>

    <label for="gender">Sex:</label>
    <select id="gender" name="gender" required>
        <option value="M">Male</option>
        <option value="F">Female</option>
    </select>

    <label for="birthdate">Birthdate:</label>
    <input type="date" id="birthdate" name="birthdate" required>

    <label for="streetAddress">Street Address:</label>
    <input type="text" id="streetAddress" name="streetAddress" required>

    <label for="city">City:</label>
    <input type="text" id="city" name="city" required>

    <label for="state">State:</label>
    <select id="state" name="state" required>
                      <option value="AL">AL</option>
                      <option value="AK">AK</option>
                      <option value="AR">AR</option>
                      <option value="AZ">AZ</option>
                      <option value="CA">CA</option>
                      <option value="CO">CO</option>
                      <option value="CT">CT</option>
                      <option value="DC">DC</option>
                      <option value="DE">DE</option>
                      <option value="FL">FL</option>
                      <option value="GA">GA</option>
                      <option value="HI">HI</option>
                      <option value="IA">IA</option>
                      <option value="ID">ID</option>
                      <option value="IL">IL</option>
                      <option value="IN">IN</option>
                      <option value="KS">KS</option>
                      <option value="KY">KY</option>
                      <option value="LA">LA</option>
                      <option value="MA">MA</option>
                      <option value="MD">MD</option>
                      <option value="ME">ME</option>
                      <option value="MI">MI</option>
                      <option value="MN">MN</option>
                      <option value="MO">MO</option>
                      <option value="MS">MS</option>
                      <option value="MT">MT</option>
                      <option value="NC">NC</option>
                      <option value="NE">NE</option>
                      <option value="NH">NH</option>
                      <option value="NJ">NJ</option>
                      <option value="NM">NM</option>
                      <option value="NV">NV</option>
                      <option value="NY">NY</option>
                      <option value="ND">ND</option>
                      <option value="OH">OH</option>
                      <option value="OK">OK</option>
                      <option value="OR">OR</option>
                      <option value="PA">PA</option>
                      <option value="RI">RI</option>
                      <option value="SC">SC</option>
                      <option value="SD">SD</option>
                      <option value="TN">TN</option>
                      <option value="TX">TX</option>
                      <option value="UT">UT</option>
                      <option value="VT">VT</option>
                      <option value="VA">VA</option>
                      <option value="WA">WA</option>
                      <option value="WI">WI</option>
                      <option value="WV">WV</option>
                      <option value="WY">WY</option>
        
    </select>

     <label for="zipcode">Zipcode:</label>
    <input type="text" id="zipcode" name="zipcode" pattern="\d+" required>

    <label for="phone">Phone:</label>
    <input type="text" id="phone" name="phone" required>

    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required>

    <label for="ssn">SSN:</label>
    <input type="text" id="ssn" name="ssn" pattern="\d{9}" required>

    <label for="department">Department:</label>
    <select id="department" name="department" required>
        <option value="D1">Dept 1</option>
        <option value="D2">Dept 2</option>
    </select>

    <label for="password">Password:</label>
    <input type="password" id="password" name="password" required>

    <button type="button" onclick="addEmployee()">Add Employee</button>
</form>




</div>

<script>
function addEmployee() {
    const formData = new FormData(document.getElementById('addEmployeeForm'));

    for (const [key, value] of formData.entries()) {
        if (document.getElementById(key).hasAttribute('required') && value.trim() === '') {
            alert(`Please fill in the required field: ${key}`);
            return; // Stop form submission
        }
    }

    fetch('addEmployee.php', {
        method: 'POST',
        body: formData
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.json(); 
    })
   .then(data => {
    console.log(data);
    alert('Employee added successfully: ' + JSON.stringify(data));
})
    
 .catch(error => {
    console.error('Error adding employee:', error);
    if (error instanceof TypeError) {
        console.log('Server error response:', error.message);
    } else {
        return error.text().then(errorMessage => {
            console.log('Server error response:', errorMessage);
        }).catch(innerError => {
            console.error('Error getting error message:', innerError);
        });
    }
});
}
</script>

        <script>
            var frameContainer1 = document.getElementById("frameContainer1");
            if (frameContainer1) {
                frameContainer1.addEventListener("click", function (e) {
                window.location.href = "./index.php";
                });
            }

            var button2Container = document.getElementById("button2Container");
            if (button2Container) {
                button2Container.addEventListener("click", function (e) {
                window.location.href = "./admin-p-o-locations.html";
                });
            }

            var button3Container = document.getElementById("button3Container");
            if (button3Container) {
                button3Container.addEventListener("click", function (e) {
                window.location.href = "./admin-products-page.html";
                });
            }

            var button4Container = document.getElementById("button4Container");
            if (button4Container) {
                button4Container.addEventListener("click", function (e) {
                window.location.href = "./admin-departments-page.html";
                });
            }

            var button7Container = document.getElementById("button7Container");
            if (button7Container) {
                button7Container.addEventListener("click", function (e) {
                window.location.href = "./admin-account-page.html";
                });
            }

            var vector = document.getElementById("vector");
            if (vector) {
                vector.addEventListener("click", function (e) {
                window.location.href = "./admin-portal-nofications-page.html";
                });
            };

            
        </script>
    </div>
</body>
</html>
